@page "/"
@using AndrewAndNatesOnlineStore.Domain.DataAccess
@using AndrewAndNatesOnlineStore.Domain.Models

<PageTitle>Login</PageTitle>

<MudText>Login</MudText>

<MudTextField T="string" @bind-Value="InputUsername" Label="Username"></MudTextField>
<MudTextField T="string" @bind-Value="InputPassword" Label="Password"></MudTextField>

<MudButton class="btn btn-primary" @onclick="btnEcexuteLogin">Login</MudButton>
<MudButton class="btn btn-primary" @onclick="btnCancelLogin">Cancel</MudButton>

@code {

    private string InputUsername;
    private string InputPassword;


    private void btnEcexuteLogin()
    {
        using (var context = new MyDbContext())
        {
            var dbPassowordList = context.Customer.Where(x => x.Username == InputUsername).ToList();

            foreach (var entityCustomer in dbPassowordList)
            {
                if (entityCustomer.Username == InputUsername && entityCustomer.LoginPassword == InputPassword)
                {
                    
                }
            }
        }
    }

    private void btnCancelLogin()
    {
        InputUsername = null;
        InputPassword = null;
    }

    private void TestingDbConnection()
    {
        using (var context = new MyDbContext())
        {
            context.Database.EnsureCreated();
            context.Customer.Add(new Customer
            {
                Firstname = "TestFirstName",
                Lastname = "TestLastName",
                Birthdate = DateTime.Today,
                Username = "Test123",
                LoginPassword = "123",
                CustomerJoinDate = DateTime.Today,
                PremiumMember = true,
                Shopppingcart = "Test"
            });
            context.SaveChanges();

            var test = context.Customer.Select(x => x).ToList();
        }
    }



}